# FinAegis v2.2.0 - Mobile Wallet Application Planning

## Overview
- **Version**: 2.2.0
- **Theme**: Mobile-First Banking Experience
- **Target**: Q1-Q2 2026
- **Repository**: `finaegis-mobile` (separate repo, Expo/EAS)

## Tech Stack Decision
- **Framework**: Expo SDK 52+ (React Native)
- **Build Service**: EAS Build
- **State**: Zustand + React Query
- **Navigation**: Expo Router (file-based)
- **UI**: NativeWind (Tailwind for RN)
- **WebSocket**: Pusher-js with Soketi backend

## Backend Enhancements Required

### 1. Mobile Device Management
- New `mobile_devices` table with device tracking
- Push token storage (FCM/APNS)
- Biometric public key storage

### 2. API Endpoints Needed
```
POST   /api/mobile/devices              # Register device
DELETE /api/mobile/devices/{id}         # Unregister
POST   /api/mobile/auth/biometric/enable
POST   /api/mobile/auth/biometric/verify
GET    /api/mobile/config
```

### 3. Push Notifications
- Firebase Cloud Messaging (FCM) for Android
- Apple Push Notification Service (APNS) for iOS
- kreait/firebase-php package

### 4. WebSocket Broadcasting
- Deploy Soketi for real-time updates
- Wire domain events to TenantBroadcastEvent
- Channels: accounts, transactions, exchange

## App Features (MVP)

### Authentication
- Email/password login
- 2FA support (TOTP)
- Biometric login (Face ID / Fingerprint)
- Device binding

### Wallet
- Multi-asset balance display
- Real-time balance updates
- Portfolio value calculation

### Transfers
- P2P transfers
- QR code payments
- Transaction confirmation with biometric/PIN

### Top-Up
- Bank transfer instructions
- Crypto deposit addresses
- (Future: Card payments)

### History
- Paginated transaction list
- Filters and search
- Export capability

## Implementation Phases

### Phase 1: Backend (Weeks 1-2)
- Mobile device model & migration
- Push notification service
- Biometric auth endpoints
- Soketi configuration

### Phase 2: App Foundation (Weeks 3-4)
- Project setup & EAS config
- Auth flow implementation
- API client
- Basic UI components

### Phase 3: Core Features (Weeks 5-8)
- Dashboard, wallet, history screens
- Transfer flow
- Top-up screens
- KYC upload

### Phase 4: Polish (Weeks 9-10)
- Error handling
- Beta testing
- App store preparation

## Key Documents
- `docs/VERSION_ROADMAP.md` - Updated with v2.2.0
- `docs/06-DEVELOPMENT/MOBILE_APP_PLANNING.md` - Full technical spec

## Existing API Coverage
The FinAegis backend already provides ~95% of needed APIs:
- Auth, accounts, balances, transactions
- Transfers, exchange rates, GCU trading
- KYC/compliance, hardware wallets
- WebSocket channels (need activation)

## Gaps to Fill
- Mobile device registration endpoints
- Biometric authentication flow
- Push notification infrastructure
- WebSocket broadcasting activation

## Next Steps
1. Create `finaegis-mobile` repository
2. Implement backend enhancements
3. Bootstrap Expo project
4. Build MVP features

---
*Updated: January 30, 2026*
