# v2.1.0 Planning Document

**Last Updated**: 2026-01-29
**Target Release**: Q2 2026
**Theme**: Platform Enhancement

## Overview

Following the successful v2.0.0 Multi-Tenancy release, v2.1.0 focuses on enterprise features that were originally planned for v2.0.0 but deferred to ensure multi-tenancy was delivered with quality.

## Planned Features

### Priority 1: Hardware Wallet Integration
**Complexity**: High | **Value**: Critical for institutional users

#### Supported Devices
- Ledger Nano S/X
- Trezor One/Model T

#### Key Components
```php
interface HardwareWalletInterface
{
    public function connect(DeviceType $device): HardwareWallet;
    public function getAccounts(HardwareWallet $wallet): array;
    public function signTransaction(HardwareWallet $wallet, Transaction $tx): SignedTransaction;
    public function verifyAddress(HardwareWallet $wallet, string $path): Address;
}
```

#### Implementation Notes
- WebUSB for browser-based connection
- Node.js/Electron app for desktop
- Support BIP44 derivation paths
- Integrate with existing Wallet domain

### Priority 2: Multi-Signature Wallet Support
**Complexity**: High | **Value**: Critical for corporate accounts

#### Features
- M-of-N signature schemes (e.g., 2-of-3)
- Threshold signature support
- Transaction approval workflow
- Multi-signer UI components

#### Key Components
```php
class MultiSigWallet
{
    public function __construct(
        private array $signers,
        private int $requiredSignatures,
    ) {}

    public function initiateTransaction(Transaction $tx, Signer $initiator): PendingTx;
    public function addSignature(PendingTx $tx, Signer $signer, Signature $sig): void;
    public function canExecute(PendingTx $tx): bool;
    public function execute(PendingTx $tx): TransactionResult;
}
```

### Priority 3: Real-time WebSocket Streaming
**Complexity**: Medium | **Value**: High for trading/monitoring

#### Features
- Order book real-time updates
- Live NAV calculations
- Push notifications for transactions
- Portfolio value streaming

#### Implementation
- Laravel Echo / Pusher or Soketi
- Redis pub/sub backend
- Tenant-scoped channels (already implemented in v2.0.0)

### Priority 4: Kubernetes Native Deployment
**Complexity**: High | **Value**: Medium-High for operations

#### Deliverables
- Helm charts for all components
- Horizontal Pod Autoscaler configurations
- Service mesh ready (Istio compatible)
- GitOps deployment workflows (ArgoCD)

## Dependencies

| Feature | Depends On |
|---------|------------|
| Hardware Wallet | Wallet Domain v1.0 |
| Multi-Signature | Hardware Wallet OR existing wallets |
| WebSocket Streaming | Phase 6 v2.0.0 (tenant channels) |
| Kubernetes | Docker images (already exist) |

## Success Metrics

| Metric | Target |
|--------|--------|
| Hardware Wallet Coverage | Ledger + Trezor |
| Multi-sig Schemes | 2-of-3, 3-of-5 |
| Real-time Latency | < 50ms |
| Kubernetes Deployment | One-click via Helm |

## Risks & Mitigations

| Risk | Mitigation |
|------|------------|
| Hardware wallet library compatibility | Use well-maintained libraries (hw-app-btc, trezor-connect) |
| WebSocket scalability | Use Redis cluster, horizontal scaling |
| Kubernetes complexity | Start with single-replica, add HPA later |

## Timeline (Tentative)

| Month | Focus |
|-------|-------|
| February | Hardware wallet research & POC |
| March | Hardware wallet implementation |
| April | Multi-signature implementation |
| May | WebSocket streaming + K8s |
| June | Testing, documentation, release |

## Reference PRs

- v2.0.0 Phase 6 WebSocket: #333
- v2.0.0 Multi-tenancy: #328-#337
